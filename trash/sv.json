# LUMPY
task Lumpy {
  File input_cram
  File input_cram_index
  File input_splitters_bam
  File input_splitters_bam_index
  File input_discordants_bam
  File input_discordants_bam_index
  File ref_fasta
  File ref_fasta_index
  File exclude_regions
  String output_vcf_basename
  Int disk_size
  
  command {
    speedseq sv \
      -P \
      -T /data/H_IJ-NA12878-NA12878_K10/H_IJ-NA12878-NA12878_K10.temp \
      -o ${output_vcf_basename} \
      -B ${input_cram} \
      -S ${input_splitters_bam} \
      -D ${input_discordants_bam} \
      -R ${ref_fasta} \
      -x ${exclude_regions}
  }
  runtime {
    docker: "cc2qe/sv-pipeline"
    cpu: "1"
    memory: "4 GB"
    disks: "local-disk " + disk_size + " HDD"
  }
  output {
    File output_bam = "${output_vcf_basename}.sv.vcf"
  }
}

workflow RunLumpy {
  String sample_name
  String final_gvcf_name
  Array[File] flowcell_unmapped_bams
  String unmapped_bam_suffix

  call Lumpy {
    input:
    input_cram = 
  }
}
